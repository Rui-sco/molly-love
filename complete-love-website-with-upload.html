<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’• è‡´æˆ‘æœ€çˆ±çš„ä½  - å®Œæ•´ç‰ˆ ğŸ’•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'SimHei', Arial, sans-serif;
            background: linear-gradient(135deg, #FFB6C1 0%, #FFC0CB 50%, #E1BEE7 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
            position: relative;
        }
        
        /* å¯¼èˆªæ  */
        .nav-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            z-index: 1000;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            flex: 1;
        }
        
        .logout-button {
            background: linear-gradient(45deg, #FF6B6B, #FF4757);
            border: none;
            color: white;
            padding: 8px 16px;
            font-size: 0.9rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(255, 107, 107, 0.3);
            font-weight: bold;
        }
        
        .logout-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.5);
        }
        
        .nav-button {
            background: linear-gradient(45deg, #FF69B4, #FF1493);
            border: none;
            color: white;
            padding: 12px 24px;
            font-size: 1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 20, 147, 0.3);
            font-weight: bold;
        }
        
        .nav-button:hover, .nav-button.active {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 20, 147, 0.5);
        }
        
        .nav-button.active {
            background: linear-gradient(45deg, #FFD700, #FFA500);
        }
        
        /* é¡µé¢å®¹å™¨ */
        .page {
            display: none;
            min-height: 100vh;
            padding: 100px 20px 40px;
            animation: fadeIn 0.6s ease-in-out;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        /* ä¸»é¡µæ ·å¼ */
        .home-container {
            max-width: 700px;
            margin: 0 auto;
            text-align: center;
        }
        
        .main-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: 30px;
            padding: 60px 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            margin: 20px;
        }
        
        .main-title {
            font-size: 4rem;
            margin-bottom: 2rem;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            background: linear-gradient(45deg, #FF69B4, #FFB6C1, #FFD700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }
        
        .subtitle {
            font-size: 1.8rem;
            margin-bottom: 3rem;
            line-height: 1.6;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            min-height: 2rem;
            animation: fadeInOut 4s ease-in-out infinite;
        }
        
        .love-letter {
            font-size: 1.3rem;
            line-height: 2;
            margin-bottom: 3rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            border-left: 4px solid #FF69B4;
        }
        
        .heart-button {
            background: linear-gradient(45deg, #FF69B4, #FF1493);
            border: none;
            color: white;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(255, 20, 147, 0.4);
            margin: 10px;
            font-weight: bold;
        }
        
        .heart-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 20, 147, 0.6);
        }
        
        /* ç…§ç‰‡ç”»å»Šæ ·å¼ */
        .gallery-header {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 40px;
        }
        
        .gallery-header h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            animation: titleGlow 3s ease-in-out infinite alternate;
        }
        
        .gallery-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }
        
        .photo-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.4s ease;
            cursor: pointer;
            opacity: 0;
            transform: translateY(50px);
            animation: slideInUp 0.6s ease-out forwards;
            position: relative;
            will-change: transform, opacity;
        }
        
        .photo-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }
        
        .photo-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.4s ease;
        }
        
        .photo-card:hover img {
            transform: scale(1.1);
        }
        
        .photo-info {
            padding: 25px;
        }
        
        .photo-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD700;
        }
        
        .photo-description {
            font-size: 1rem;
            line-height: 1.6;
            opacity: 0.9;
        }
        
        .photo-date {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-top: 15px;
            font-style: italic;
        }
        
        .delete-photo-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(45deg, #FF6B6B, #FF4757);
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 14px;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(255, 107, 107, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .photo-card:hover .delete-photo-btn {
            opacity: 1;
        }
        
        .delete-photo-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.5);
        }
        
        /* æ–‡ä»¶ä¸Šä¼ æ ·å¼ */
        .upload-area {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin: 30px auto;
            max-width: 600px;
            border: 2px dashed rgba(255, 255, 255, 0.5);
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: #FF69B4;
            background: rgba(255, 255, 255, 0.3);
        }
        
        .upload-area.dragover {
            border-color: #FF69B4;
            background: rgba(255, 105, 180, 0.1);
            transform: scale(1.02);
        }
        
        .file-input {
            display: none;
        }
        
        .upload-button {
            background: linear-gradient(45deg, #FF69B4, #FF1493);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(255, 20, 147, 0.4);
            margin: 10px;
            font-weight: bold;
        }
        
        .upload-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 20, 147, 0.6);
        }
        
        .upload-form {
            display: none;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            margin: 20px auto;
            max-width: 500px;
            border: 1px solid rgba(255, 255, 255, 0.4);
        }
        
        .upload-form.active {
            display: block;
            animation: slideInUp 0.5s ease-out;
        }
        
        .preview-image {
            max-width: 100%;
            max-height: 200px;
            border-radius: 15px;
            margin: 15px 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(255, 182, 193, 0.5);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            outline: none;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            border-color: #FF69B4;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.3);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        /* ç•™è¨€æ¿æ ·å¼ */
        .messages-header {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 30px;
        }
        
        .messages-header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            color: #E91E63;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }
        
        .messages-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .message-form {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }
        
        .messages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .message-card {
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(30px);
            animation: slideInUp 0.6s ease-out forwards;
            will-change: transform, opacity;
        }
        
        .message-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        
        .message-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(45deg, #FF69B4, #FF1493);
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .message-type {
            background: linear-gradient(45deg, #FF69B4, #FF1493);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .message-date {
            font-size: 0.9rem;
            opacity: 0.7;
            color: #C2185B;
        }
        
        .message-content {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 15px;
            color: #C2185B;
        }
        
        .message-author {
            text-align: right;
            font-style: italic;
            color: #E91E63;
            font-weight: bold;
        }
        
        .delete-message-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(45deg, #FF6B6B, #FF4757);
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            font-size: 12px;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(255, 107, 107, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .message-card:hover .delete-message-btn {
            opacity: 1;
        }
        
        .delete-message-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.5);
        }
        
        /* é€šç”¨å…ƒç´  */
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .heart {
            position: absolute;
            color: rgba(255, 255, 255, 0.8);
            font-size: 20px;
            animation: float 8s ease-in-out infinite;
        }
        
        .click-counter {
            position: fixed;
            top: 100px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-weight: bold;
            z-index: 100;
        }
        
        .quick-messages {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .quick-message-btn {
            background: rgba(255, 182, 193, 0.3);
            border: 1px solid rgba(255, 105, 180, 0.3);
            color: #C2185B;
            padding: 8px 15px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .quick-message-btn:hover {
            background: rgba(255, 105, 180, 0.2);
            border-color: #FF69B4;
        }
        
        .interactive-area {
            text-align: center;
            margin: 40px 0;
        }
        
        .memory-counter {
            text-align: center;
            font-size: 1.3rem;
            margin: 30px 0;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        /* åŠ¨ç”» */
        @keyframes float {
            0%, 100% { 
                transform: translateY(100vh) rotate(0deg); 
                opacity: 0; 
            }
            10% { 
                opacity: 1; 
            }
            90% { 
                opacity: 1; 
            }
            100% { 
                transform: translateY(-100vh) rotate(360deg); 
                opacity: 0; 
            }
        }
        
        @keyframes titleGlow {
            0% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
            100% { filter: brightness(1); }
        }
        
        @keyframes fadeInOut {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
        
        @keyframes slideInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            max-width: 90%;
            max-height: 90%;
            text-align: center;
            color: #C2185B;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .modal-content img {
            max-width: 100%;
            max-height: 60vh;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 105, 180, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .modal-close:hover {
            background: rgba(255, 20, 147, 0.9);
            transform: scale(1.1);
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .nav-buttons {
                gap: 10px;
            }
            
            .nav-button {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .main-title {
                font-size: 3rem;
            }
            
            .subtitle {
                font-size: 1.4rem;
            }
            
            .love-letter {
                font-size: 1.1rem;
                padding: 20px;
            }
            
            .gallery-header h1,
            .messages-header h1 {
                font-size: 2.5rem;
            }
            
            .gallery-grid,
            .messages-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .click-counter {
                top: 80px;
                right: 10px;
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            .upload-area {
                padding: 20px;
                margin: 20px 10px;
            }
            
            .upload-form {
                padding: 20px;
                margin: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <div class="nav-container">
        <div class="nav-buttons">
            <button class="nav-button active" onclick="showPage('home')">ğŸ  çˆ±çš„ä¸»é¡µ</button>
            <button class="nav-button" onclick="showPage('gallery')">ğŸ“¸ æµªæ¼«å›å¿†</button>
            <button class="nav-button" onclick="showPage('messages')">ğŸ’Œ çˆ±æƒ…ç•™è¨€</button>
        </div>
        <button class="logout-button" onclick="logout()">ğŸšª é€€å‡º</button>
    </div>

    <!-- çˆ±æ„è®¡æ•°å™¨ -->
    <div class="click-counter" id="clickCounter">ğŸ’– å·²è¡¨è¾¾çˆ±æ„ 0 æ¬¡</div>

    <!-- é£˜æµ®çš„çˆ±å¿ƒ -->
    <div class="floating-hearts" id="floatingHearts"></div>

    <!-- ä¸»é¡µ -->
    <div id="home" class="page active">
        <div class="home-container">
            <div class="main-card">
                <h1 class="main-title">ğŸ’• æˆ‘çˆ±ä½  ğŸ’•</h1>
                
                <div class="subtitle" id="subtitle">
                    äº²çˆ±çš„ï¼Œé‡è§ä½ æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€ç¾å¥½çš„å¥‡è¿¹
                </div>
                
                <div class="love-letter">
                    <p>ä»é‡è§ä½ çš„é‚£ä¸€åˆ»èµ·ï¼Œæˆ‘çš„ä¸–ç•Œå˜å¾—ä¸ä¸€æ ·äº†ã€‚</p>
                    <p>ä½ çš„ç¬‘å®¹å¦‚æ˜¥é£èˆ¬æ¸©æš–ï¼Œä½ çš„çœ¼ç¥å¦‚æ˜Ÿè¾°èˆ¬é—ªè€€ã€‚</p>
                    <p>æ¯ä¸€å¤©é†’æ¥ï¼Œæƒ³åˆ°ä½ ï¼Œæˆ‘çš„ä¸–ç•Œå°±å……æ»¡äº†é˜³å…‰ã€‚</p>
                    <p>æ„¿æˆ‘æ‰€æœ‰çš„æ¸©æŸ”å’Œåçˆ±éƒ½ç»™ä½ ï¼Œæ­¤ç”Ÿæœ‰ä½ ï¼Œè¶³çŸ£ã€‚</p>
                    <div style="text-align: right; margin-top: 2rem; font-style: italic; color: #FFD700;">çˆ±ä½ çš„æˆ‘ ğŸ’•</div>
                </div>
                
                <div style="margin-top: 2rem;">
                    <button class="heart-button" onclick="showLove()">
                        ğŸ’– ç‚¹å‡»è¡¨è¾¾çˆ±æ„ ğŸ’–
                    </button>
                    <button class="heart-button" onclick="createHeartRain()">
                        âœ¨ çˆ±å¿ƒé›¨ âœ¨
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ç…§ç‰‡ç”»å»Š -->
    <div id="gallery" class="page">
        <div class="gallery-header">
            <h1>ğŸ’• æˆ‘ä»¬çš„æµªæ¼«å›å¿† ğŸ’•</h1>
            <p>æ¯ä¸€å¼ ç…§ç‰‡éƒ½æ‰¿è½½ç€æˆ‘ä»¬çš„ç”œèœœæ—¶å…‰</p>
        </div>
        
        <div class="memory-counter">
            <p>ğŸ’ æˆ‘ä»¬å·²ç»ä¸€èµ·åˆ›é€ äº† <span id="memoryCount">0</span> ä¸ªç¾å¥½å›å¿† ğŸ’</p>
            <p>æ¯ä¸€åˆ»éƒ½å€¼å¾—çè—</p>
        </div>
        
        <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ -->
        <div class="upload-area" id="uploadArea">
            <h3>ğŸ“¸ ä¸Šä¼ ä½ ä»¬çš„æµªæ¼«ç…§ç‰‡</h3>
            <p>æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œï¼Œæˆ–è€…ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</p>
            <input type="file" id="fileInput" class="file-input" accept="image/*" multiple>
            <button class="upload-button" onclick="document.getElementById('fileInput').click()">
                ğŸ“ é€‰æ‹©ç…§ç‰‡
            </button>
            <button class="upload-button" onclick="toggleUploadForm()">
                âœ¨ æ‰‹åŠ¨æ·»åŠ å›å¿†
            </button>
        </div>
        
        <!-- æ‰‹åŠ¨æ·»åŠ è¡¨å• -->
        <div class="upload-form" id="uploadForm">
            <h3>ğŸ’• æ·»åŠ ç¾å¥½å›å¿†</h3>
            <div class="form-group">
                <label for="photoTitle">ğŸ’ å›å¿†æ ‡é¢˜</label>
                <input type="text" id="photoTitle" placeholder="ç»™è¿™ä¸ªç¾å¥½æ—¶åˆ»èµ·ä¸ªåå­—">
            </div>
            <div class="form-group">
                <label for="photoDescription">ğŸ’Œ å›å¿†æè¿°</label>
                <textarea id="photoDescription" placeholder="æè¿°è¿™ä¸ªç‰¹åˆ«çš„æ—¶åˆ»..."></textarea>
            </div>
            <div class="form-group">
                <label for="photoDate">ğŸ“… å›å¿†æ—¥æœŸ</label>
                <input type="text" id="photoDate" placeholder="ä¾‹å¦‚ï¼š2024å¹´æƒ…äººèŠ‚">
            </div>
            <div class="form-group">
                <label for="photoUrl">ğŸ–¼ï¸ å›¾ç‰‡é“¾æ¥ï¼ˆå¯é€‰ï¼‰</label>
                <input type="url" id="photoUrl" placeholder="ç²˜è´´å›¾ç‰‡ç½‘å€ï¼Œæˆ–ç•™ç©ºä½¿ç”¨é»˜è®¤å›¾ç‰‡">
            </div>
            <div id="imagePreview"></div>
            <div style="text-align: center;">
                <button class="heart-button" onclick="addManualMemory()">
                    ğŸ’– æ·»åŠ å›å¿†
                </button>
                <button class="heart-button" onclick="toggleUploadForm()">
                    âŒ å–æ¶ˆ
                </button>
            </div>
        </div>
        
        <div class="interactive-area">
            <button class="heart-button" onclick="createHeartRain()">âœ¨ çˆ±å¿ƒé›¨</button>
            <button class="heart-button" onclick="showRandomMemory()">ğŸ² éšæœºå›å¿†</button>
        </div>
        
        <div class="gallery-container">
            <div class="gallery-grid" id="galleryGrid">
                <!-- æµªæ¼«ç…§ç‰‡å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- çˆ±æƒ…ç•™è¨€æ¿ -->
    <div id="messages" class="page">
        <div class="messages-header">
            <h1>ğŸ’Œ çˆ±æƒ…ç•™è¨€æ¿ ğŸ’Œ</h1>
            <p>æŠŠä½ æƒ³å¯¹æˆ‘è¯´çš„è¯å†™åœ¨è¿™é‡Œï¼Œæ¯ä¸€æ¡æˆ‘éƒ½ä¼šçè—</p>
        </div>
        
        <div class="messages-container">
            <div class="message-form">
                <div class="form-group">
                    <label for="messageType">ğŸ’ é€‰æ‹©ç•™è¨€ç±»å‹</label>
                    <select id="messageType">
                        <option value="love">ğŸ’• çˆ±æƒ…å‘Šç™½</option>
                        <option value="memory">ğŸ“¸ ç¾å¥½å›å¿†</option>
                        <option value="promise">â­ ç”œèœœæ‰¿è¯º</option>
                        <option value="feeling">ğŸ’­ å¿ƒæƒ…åˆ†äº«</option>
                        <option value="future">ğŸŒŸ æœªæ¥æ†§æ†¬</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="messageContent">ğŸ’Œ å†™ä¸‹ä½ çš„å¿ƒé‡Œè¯</label>
                    <textarea id="messageContent" placeholder="äº²çˆ±çš„ï¼Œæˆ‘æƒ³å¯¹ä½ è¯´..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="messageAuthor">âœï¸ ç½²å</label>
                    <input type="text" id="messageAuthor" placeholder="çˆ±ä½ çš„..." />
                </div>
                
                <div class="quick-messages">
                    <button class="quick-message-btn" onclick="insertQuickMessage('äº²çˆ±çš„ï¼Œé‡è§ä½ æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€ç¾å¥½çš„å¥‡è¿¹ã€‚')">é‡è§å¥‡è¿¹</button>
                    <button class="quick-message-btn" onclick="insertQuickMessage('æ¯ä¸€å¤©é†’æ¥ï¼Œæƒ³åˆ°ä½ ï¼Œæˆ‘çš„ä¸–ç•Œå°±å……æ»¡äº†é˜³å…‰ã€‚')">é˜³å…‰æ»¡æ»¡</button>
                    <button class="quick-message-btn" onclick="insertQuickMessage('ä½ çš„ç¬‘å®¹æ˜¯æˆ‘è§è¿‡æœ€ç¾çš„é£æ™¯ã€‚')">æœ€ç¾ç¬‘å®¹</button>
                    <button class="quick-message-btn" onclick="insertQuickMessage('æ„¿æˆ‘æ‰€æœ‰çš„æ¸©æŸ”å’Œåçˆ±éƒ½ç»™ä½ ã€‚')">æ¸©æŸ”ç»™ä½ </button>
                    <button class="quick-message-btn" onclick="insertQuickMessage('æ­¤ç”Ÿæœ‰ä½ ï¼Œè¶³çŸ£ã€‚')">æ­¤ç”Ÿæœ‰ä½ </button>
                    <button class="quick-message-btn" onclick="insertQuickMessage('çˆ±ä½ ï¼Œæ˜¯æˆ‘åšè¿‡æœ€å¯¹çš„å†³å®šã€‚')">æœ€å¯¹å†³å®š</button>
                </div>
                
                <button class="submit-button" onclick="addMessage()">ğŸ’ å‘é€çˆ±çš„ç•™è¨€</button>
            </div>
            
            <div class="messages-grid" id="messagesContainer">
                <!-- ç•™è¨€å°†åœ¨è¿™é‡ŒåŠ¨æ€æ˜¾ç¤º -->
            </div>
        </div>
    </div>

    <!-- ç…§ç‰‡è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="photoModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closePhotoModal()">&times;</button>
            <img id="modalImage" src="" alt="">
            <h2 id="modalTitle"></h2>
            <p id="modalDescription"></p>
            <p id="modalDate" style="opacity: 0.7; font-style: italic;"></p>
        </div>
    </div>

    <script>
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            if (localStorage.getItem('loveWebsiteLoggedIn') !== 'true') {
                window.location.href = 'login.html';
                return false;
            }
            return true;
        }
        
        // ç™»å‡ºåŠŸèƒ½
        function logout() {
            localStorage.removeItem('loveWebsiteLoggedIn');
            localStorage.removeItem('loveWebsiteUsername');
            window.location.href = 'login.html';
        }
        
        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ç™»å½•çŠ¶æ€
        if (!checkLoginStatus()) {
            // å¦‚æœæœªç™»å½•ï¼Œåœæ­¢æ‰§è¡Œåç»­ä»£ç 
            throw new Error('User not logged in');
        }
        
        // å…¨å±€å˜é‡
        let clickCount = 0;
        let currentMessageIndex = 0;
        let memoryCount = 0;
        let loveCount = 0;
        let messages = [];
        let romanticPhotos = [];
        let currentPhotoIndex = 0;

        // çˆ±æƒ…æ¶ˆæ¯æ•°ç»„
        const loveMessages = [
            "äº²çˆ±çš„ï¼Œé‡è§ä½ æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€ç¾å¥½çš„å¥‡è¿¹",
            "æ¯ä¸€å¤©é†’æ¥ï¼Œæƒ³åˆ°ä½ ï¼Œæˆ‘çš„ä¸–ç•Œå°±å……æ»¡äº†é˜³å…‰",
            "ä½ çš„ç¬‘å®¹æ˜¯æˆ‘è§è¿‡æœ€ç¾çš„é£æ™¯",
            "æ„¿æˆ‘æ‰€æœ‰çš„æ¸©æŸ”å’Œåçˆ±éƒ½ç»™ä½ ",
            "æ­¤ç”Ÿæœ‰ä½ ï¼Œè¶³çŸ£",
            "ä½ æ˜¯æˆ‘å¿ƒä¸­æ°¸è¿œçš„å”¯ä¸€",
            "çˆ±ä½ ï¼Œæ˜¯æˆ‘åšè¿‡æœ€å¯¹çš„å†³å®š",
            "æ„¿æˆ‘ä»¬çš„çˆ±å¦‚æ˜Ÿè¾°èˆ¬æ°¸æ’é—ªè€€"
        ];

        // ç•™è¨€ç±»å‹é…ç½®
        const messageTypes = {
            love: { emoji: 'ğŸ’•', name: 'çˆ±æƒ…å‘Šç™½', color: '#FF69B4' },
            memory: { emoji: 'ğŸ“¸', name: 'ç¾å¥½å›å¿†', color: '#FFB6C1' },
            promise: { emoji: 'â­', name: 'ç”œèœœæ‰¿è¯º', color: '#FFD700' },
            feeling: { emoji: 'ğŸ’­', name: 'å¿ƒæƒ…åˆ†äº«', color: '#E91E63' },
            future: { emoji: 'ğŸŒŸ', name: 'æœªæ¥æ†§æ†¬', color: '#FF1493' }
        };

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç…§ç‰‡æ•°æ®
        function loadPhotosFromStorage() {
            const stored = localStorage.getItem('romanticPhotos');
            if (stored) {
                try {
                    return JSON.parse(stored);
                } catch (e) {
                    console.error('åŠ è½½ç…§ç‰‡æ•°æ®å¤±è´¥:', e);
                    return [];
                }
            }
            return [];
        }
        
        // ä¿å­˜ç…§ç‰‡æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function savePhotosToStorage() {
            try {
                localStorage.setItem('romanticPhotos', JSON.stringify(romanticPhotos));
            } catch (e) {
                console.error('ä¿å­˜ç…§ç‰‡æ•°æ®å¤±è´¥:', e);
            }
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç•™è¨€æ•°æ®
        function loadMessagesFromStorage() {
            const stored = localStorage.getItem('loveMessages');
            if (stored) {
                try {
                    return JSON.parse(stored);
                } catch (e) {
                    console.error('åŠ è½½ç•™è¨€æ•°æ®å¤±è´¥:', e);
                    return [];
                }
            }
            return [];
        }
        
        // ä¿å­˜ç•™è¨€æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveMessagesToStorage() {
            try {
                localStorage.setItem('loveMessages', JSON.stringify(messages));
            } catch (e) {
                console.error('ä¿å­˜ç•™è¨€æ•°æ®å¤±è´¥:', e);
            }
        }

        // åˆå§‹åŒ–
        function init() {
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç…§ç‰‡æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ºç©ºæ•°ç»„
            romanticPhotos = loadPhotosFromStorage();
            memoryCount = romanticPhotos.length;
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç•™è¨€æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ºç©ºæ•°ç»„
            messages = loadMessagesFromStorage();
            
            createFloatingHearts();
            initGallery();
            renderMessages();
            updateCounters();
            setupFileUpload();
            
            // å®šæœŸæ›´æ–°æ¶ˆæ¯
            setInterval(() => {
                currentMessageIndex = (currentMessageIndex + 1) % loveMessages.length;
                const subtitle = document.getElementById('subtitle');
                if (subtitle && document.getElementById('home').classList.contains('active')) {
                    subtitle.textContent = loveMessages[currentMessageIndex];
                }
            }, 4000);
            
            // å®šæœŸæ›´æ–°é£˜æµ®çˆ±å¿ƒ
            setInterval(createFloatingHearts, 15000);
        }

        // æ–‡ä»¶ä¸Šä¼ è®¾ç½®
        function setupFileUpload() {
            const fileInput = document.getElementById('fileInput');
            const uploadArea = document.getElementById('uploadArea');
            
            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶
            fileInput.addEventListener('change', handleFileSelect);
            
            // æ‹–æ‹½äº‹ä»¶
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('dragleave', handleDragLeave);
            uploadArea.addEventListener('drop', handleFileDrop);
            
            // URLè¾“å…¥é¢„è§ˆ
            document.getElementById('photoUrl').addEventListener('input', previewImageUrl);
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.stopPropagation();
            document.getElementById('uploadArea').classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            e.stopPropagation();
            document.getElementById('uploadArea').classList.remove('dragover');
        }

        function handleFileDrop(e) {
            e.preventDefault();
            e.stopPropagation();
            document.getElementById('uploadArea').classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            handleFiles(files);
        }

        function handleFileSelect(e) {
            const files = e.target.files;
            handleFiles(files);
        }

        function handleFiles(files) {
            Array.from(files).forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        addPhotoFromFile(e.target.result, file.name);
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        function addPhotoFromFile(dataUrl, fileName) {
            const newMemory = {
                id: Date.now(), // ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID
                title: `çè´µçš„å›å¿† #${romanticPhotos.length + 1}`,
                description: "è¿™æ˜¯æˆ‘ä»¬çè´µçš„å›å¿†ï¼Œæ¯ä¸€åˆ»éƒ½å€¼å¾—çè—ã€‚",
                date: "åˆšåˆšä¸Šä¼ ",
                image: dataUrl
            };
            
            romanticPhotos.unshift(newMemory);
            memoryCount++;
            savePhotosToStorage(); // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            initGallery();
            createHeartRain();
            updateCounters();
            
            showNotification('ç…§ç‰‡ä¸Šä¼ æˆåŠŸï¼å·²æ·»åŠ åˆ°å›å¿†ä¸­ ğŸ’•');
        }

        function toggleUploadForm() {
            const form = document.getElementById('uploadForm');
            form.classList.toggle('active');
            if (form.classList.contains('active')) {
                // æ¸…ç©ºè¡¨å•
                document.getElementById('photoTitle').value = '';
                document.getElementById('photoDescription').value = '';
                document.getElementById('photoDate').value = '';
                document.getElementById('photoUrl').value = '';
                document.getElementById('imagePreview').innerHTML = '';
            }
        }

        function previewImageUrl() {
            const url = document.getElementById('photoUrl').value.trim();
            const preview = document.getElementById('imagePreview');
            
            if (url) {
                preview.innerHTML = `<img src="${url}" alt="é¢„è§ˆ" class="preview-image" onerror="this.style.display='none'">`;
            } else {
                preview.innerHTML = '';
            }
        }

        function addManualMemory() {
            const title = document.getElementById('photoTitle').value.trim();
            const description = document.getElementById('photoDescription').value.trim();
            const date = document.getElementById('photoDate').value.trim();
            const url = document.getElementById('photoUrl').value.trim();
            
            if (!title || !description) {
                alert('ğŸ’• è¯·å¡«å†™æ ‡é¢˜å’Œæè¿°å“¦ï½');
                return;
            }
            
            const newMemory = {
                id: Date.now(), // ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID
                title: title || "çè´µçš„å›å¿†",
                description: description || "è¿™æ˜¯æˆ‘ä»¬çè´µçš„å›å¿†",
                date: date || "ç¾å¥½æ—¶å…‰",
                image: url || "https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Beautiful%20romantic%20moment%20with%20hearts%20and%20love%20symbols%2C%20warm%20colors%2C%20happiness%20and%20romance&image_size=landscape_16_9"
            };
            
            romanticPhotos.unshift(newMemory);
            memoryCount++;
            savePhotosToStorage(); // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            initGallery();
            createHeartRain();
            updateCounters();
            toggleUploadForm();
            
            showNotification('å›å¿†æ·»åŠ æˆåŠŸï¼ğŸ’•');
        }

        // é¡µé¢åˆ‡æ¢
        function showPage(pageId) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // æ˜¾ç¤ºç›®æ ‡é¡µé¢
            document.getElementById(pageId).classList.add('active');
            
            // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // ä¸»é¡µåŠŸèƒ½
        function showLove() {
            clickCount++;
            currentMessageIndex = (currentMessageIndex + 1) % loveMessages.length;
            
            document.getElementById('subtitle').textContent = loveMessages[currentMessageIndex];
            updateCounters();
            createHeartEffect();
            
            // éœ‡åŠ¨æ•ˆæœ
            document.body.style.animation = 'none';
            setTimeout(() => {
                document.body.style.animation = 'heartbeat 0.5s ease-in-out';
            }, 10);
        }

        // åˆ›å»ºçˆ±å¿ƒç‰¹æ•ˆ
        function createHeartEffect() {
            const colors = ['#FF69B4', '#FFB6C1', '#FFC0CB', '#FFD700', '#FF1493'];
            
            for (let i = 0; i < 8; i++) {
                const heart = document.createElement('div');
                heart.style.position = 'fixed';
                heart.style.left = (Math.random() * window.innerWidth) + 'px';
                heart.style.top = (Math.random() * window.innerHeight) + 'px';
                heart.innerHTML = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’'][Math.floor(Math.random() * 4)];
                heart.style.fontSize = (Math.random() * 30 + 20) + 'px';
                heart.style.color = colors[Math.floor(Math.random() * colors.length)];
                heart.style.pointerEvents = 'none';
                heart.style.zIndex = '1000';
                heart.style.animation = 'float 3s ease-out forwards';
                
                document.body.appendChild(heart);
                
                setTimeout(() => {
                    heart.remove();
                }, 3000);
            }
        }

        // çˆ±å¿ƒé›¨
        function createHeartRain() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.style.position = 'fixed';
                    heart.style.left = Math.random() * window.innerWidth + 'px';
                    heart.style.top = '-50px';
                    heart.innerHTML = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’', 'ğŸ’˜'][Math.floor(Math.random() * 5)];
                    heart.style.fontSize = (Math.random() * 25 + 15) + 'px';
                    heart.style.pointerEvents = 'none';
                    heart.style.zIndex = '1000';
                    heart.style.animation = 'float 4s ease-in forwards';
                    heart.style.color = ['#FF69B4', '#FFB6C1', '#FFC0CB', '#FFD700'][Math.floor(Math.random() * 4)];
                    
                    document.body.appendChild(heart);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 4000);
                }, i * 100);
            }
        }

        // ç…§ç‰‡ç”»å»ŠåŠŸèƒ½
        function initGallery() {
            const galleryGrid = document.getElementById('galleryGrid');
            galleryGrid.innerHTML = '';
            
            // å¦‚æœæ²¡æœ‰ç…§ç‰‡ï¼Œæ˜¾ç¤ºå‹å¥½æç¤º
            if (romanticPhotos.length === 0) {
                galleryGrid.innerHTML = `
                    <div style="
                        text-align: center;
                        padding: 60px 20px;
                        color: white;
                        max-width: 500px;
                        margin: 0 auto;
                    ">
                        <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ“¸</div>
                        <h3 style="font-size: 1.5rem; margin-bottom: 15px;">è¿˜æ²¡æœ‰æµªæ¼«å›å¿†å‘¢</h3>
                        <p style="font-size: 1.1rem; opacity: 0.9; margin-bottom: 30px;">
                            ç‚¹å‡»ä¸Šæ–¹çš„"ä¸Šä¼ ç…§ç‰‡"æˆ–"æ‰‹åŠ¨æ·»åŠ å›å¿†"æŒ‰é’®ï¼Œ<br>
                            å¼€å§‹è®°å½•ä½ ä»¬çš„ç¾å¥½æ—¶å…‰å§ï¼
                        </p>
                        <div style="font-size: 2rem;">ğŸ’•</div>
                    </div>
                `;
                return;
            }
            
            romanticPhotos.forEach((photo, index) => {
                const photoCard = document.createElement('div');
                photoCard.className = 'photo-card';
                photoCard.style.animationDelay = `${index * 0.1}s`;
                
                photoCard.innerHTML = `
                    <img src="${photo.image}" alt="${photo.title}" onerror="this.src='https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Beautiful%20romantic%20scene%20with%20hearts%20and%20love%20symbols%2C%20soft%20pink%20colors%2C%20romantic%20atmosphere&image_size=square'">
                    <div class="photo-info">
                        <div class="photo-title">${photo.title}</div>
                        <div class="photo-description">${photo.description}</div>
                        <div class="photo-date">${photo.date}</div>
                        <button class="delete-photo-btn" onclick="deletePhoto(${index})" title="åˆ é™¤è¿™å¼ ç…§ç‰‡">ğŸ—‘ï¸</button>
                    </div>
                `;
                
                photoCard.addEventListener('click', (e) => {
                    // å¦‚æœç‚¹å‡»çš„æ˜¯åˆ é™¤æŒ‰é’®ï¼Œä¸æ˜¾ç¤ºæ¨¡æ€æ¡†
                    if (e.target.classList.contains('delete-photo-btn')) {
                        return;
                    }
                    showPhotoModal(photo);
                });
                
                galleryGrid.appendChild(photoCard);
            });
        }

        function showPhotoModal(photo) {
            const modal = document.getElementById('photoModal');
            document.getElementById('modalImage').src = photo.image;
            document.getElementById('modalTitle').textContent = photo.title;
            document.getElementById('modalDescription').textContent = photo.description;
            document.getElementById('modalDate').textContent = photo.date;
            modal.classList.add('active');
            createHeartEffect();
        }

        function closePhotoModal() {
            document.getElementById('photoModal').classList.remove('active');
        }

        function showRandomMemory() {
            if (romanticPhotos.length === 0) return;
            const randomIndex = Math.floor(Math.random() * romanticPhotos.length);
            const randomPhoto = romanticPhotos[randomIndex];
            showPhotoModal(randomPhoto);
        }
        
        // åˆ é™¤ç…§ç‰‡åŠŸèƒ½
        function deletePhoto(index) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™å¼ ç…§ç‰‡å—ï¼Ÿ')) {
                // æ·»åŠ æ·¡å‡ºåŠ¨ç”»
                const photoCard = document.querySelectorAll('.photo-card')[index];
                if (photoCard) {
                    // åˆ›å»ºçˆ±å¿ƒæ¶ˆæ•£æ•ˆæœ
                    createHeartBurst(photoCard);
                    
                    photoCard.style.transform = 'scale(0.8)';
                    photoCard.style.opacity = '0';
                    
                    setTimeout(() => {
                        romanticPhotos.splice(index, 1);
                        memoryCount = romanticPhotos.length;
                        savePhotosToStorage();
                        initGallery();
                        updateCounters();
                        
                        // æ˜¾ç¤ºåˆ é™¤æˆåŠŸæç¤º
                        showNotification('ç…§ç‰‡å·²åˆ é™¤ ğŸ’•');
                    }, 300);
                } else {
                    // å¦‚æœæ‰¾ä¸åˆ°å…ƒç´ ï¼Œç›´æ¥åˆ é™¤
                    romanticPhotos.splice(index, 1);
                    memoryCount = romanticPhotos.length;
                    savePhotosToStorage();
                    initGallery();
                    updateCounters();
                    
                    // æ˜¾ç¤ºåˆ é™¤æˆåŠŸæç¤º
                    showNotification('ç…§ç‰‡å·²åˆ é™¤ ğŸ’•');
                }
            }
        }
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #FF69B4, #FF1493);
                color: white;
                padding: 15px 25px;
                border-radius: 25px;
                font-weight: bold;
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
                box-shadow: 0 4px 15px rgba(255, 20, 147, 0.3);
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s ease-in forwards';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 2000);
        }

        // ç•™è¨€æ¿åŠŸèƒ½
        function addMessage() {
            const type = document.getElementById('messageType').value;
            const content = document.getElementById('messageContent').value.trim();
            const author = document.getElementById('messageAuthor').value.trim() || 'çˆ±ä½ çš„æˆ‘';
            
            if (!content) {
                alert('ğŸ’• è¯·å†™ä¸‹ä½ çš„å¿ƒé‡Œè¯å“¦ï½');
                return;
            }
            
            const newMessage = {
                id: Date.now(), // ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID
                type: type,
                content: content,
                author: author,
                date: new Date().toLocaleString('zh-CN')
            };
            
            messages.unshift(newMessage);
            loveCount++;
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            saveMessagesToStorage();
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('messageContent').value = '';
            document.getElementById('messageAuthor').value = '';
            
            // é‡æ–°æ¸²æŸ“
            renderMessages();
            updateCounters();
            createHeartEffect();
            
            showNotification('çˆ±çš„ç•™è¨€å·²å‘é€æˆåŠŸï¼ğŸ’');
        }

        function insertQuickMessage(text) {
            const contentField = document.getElementById('messageContent');
            contentField.value = text;
            contentField.focus();
        }

        function renderMessages() {
            const container = document.getElementById('messagesContainer');
            
            if (messages.length === 0) {
                container.innerHTML = `
                    <div style="
                        text-align: center;
                        padding: 60px 20px;
                        background: rgba(255, 255, 255, 0.2);
                        border-radius: 20px;
                        backdrop-filter: blur(10px);
                        max-width: 500px;
                        margin: 0 auto;
                    ">
                        <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ’Œ</div>
                        <h3 style="color: #E91E63; font-size: 1.5rem; margin-bottom: 15px;">è¿˜æ²¡æœ‰çˆ±æƒ…ç•™è¨€å‘¢</h3>
                        <p style="font-size: 1.1rem; opacity: 0.9; margin-bottom: 30px;">
                            ç‚¹å‡»ä¸‹æ–¹çš„ç•™è¨€æ¡†ï¼Œ<br>
                            å†™ä¸‹ä½ å¯¹TAçš„ç”œèœœè¯è¯­å§ï¼
                        </p>
                        <div style="font-size: 2rem;">ğŸ’•</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = messages.map((message, index) => {
                const typeInfo = messageTypes[message.type];
                return `
                    <div class="message-card" style="animation-delay: ${index * 0.1}s; position: relative;">
                        <div class="message-header">
                            <span class="message-type" style="background: ${typeInfo.color};">
                                ${typeInfo.emoji} ${typeInfo.name}
                            </span>
                            <span class="message-date">${message.date}</span>
                        </div>
                        <div class="message-content">${message.content}</div>
                        <div class="message-author">â€”â€” ${message.author}</div>
                        <button class="delete-message-btn" onclick="deleteMessage(${index})" title="åˆ é™¤è¿™æ¡ç•™è¨€">ğŸ—‘ï¸</button>
                    </div>
                `;
            }).join('');
        }
        
        // åˆ é™¤ç•™è¨€åŠŸèƒ½
        function deleteMessage(index) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡ç•™è¨€å—ï¼Ÿ')) {
                // æ·»åŠ æ·¡å‡ºåŠ¨ç”»
                const messageCard = document.querySelectorAll('.message-card')[index];
                if (messageCard) {
                    // åˆ›å»ºçˆ±å¿ƒæ¶ˆæ•£æ•ˆæœ
                    createHeartBurst(messageCard);
                    
                    messageCard.style.transform = 'scale(0.8)';
                    messageCard.style.opacity = '0';
                    
                    setTimeout(() => {
                        messages.splice(index, 1);
                        loveCount--;
                        saveMessagesToStorage();
                        renderMessages();
                        updateCounters();
                        showNotification('ç•™è¨€å·²åˆ é™¤ ğŸ’•');
                    }, 300);
                } else {
                    // å¦‚æœæ‰¾ä¸åˆ°å…ƒç´ ï¼Œç›´æ¥åˆ é™¤
                    messages.splice(index, 1);
                    loveCount--;
                    saveMessagesToStorage();
                    renderMessages();
                    updateCounters();
                    showNotification('ç•™è¨€å·²åˆ é™¤ ğŸ’•');
                }
            }
        }

        // é€šç”¨åŠŸèƒ½
        function createHeartBurst(element) {
            const rect = element.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            // åˆ›å»ºå¤šä¸ªå°çˆ±å¿ƒå‘å¤–æ‰©æ•£
            for (let i = 0; i < 8; i++) {
                const heart = document.createElement('div');
                heart.innerHTML = 'ğŸ’•';
                heart.style.position = 'fixed';
                heart.style.left = centerX + 'px';
                heart.style.top = centerY + 'px';
                heart.style.fontSize = '20px';
                heart.style.pointerEvents = 'none';
                heart.style.zIndex = '9999';
                heart.style.transition = 'all 0.8s ease-out';
                
                // éšæœºæ–¹å‘å’Œè·ç¦»
                const angle = (i / 8) * Math.PI * 2;
                const distance = 50 + Math.random() * 50;
                const finalX = centerX + Math.cos(angle) * distance;
                const finalY = centerY + Math.sin(angle) * distance - 20;
                
                document.body.appendChild(heart);
                
                // è§¦å‘åŠ¨ç”»
                setTimeout(() => {
                    heart.style.left = finalX + 'px';
                    heart.style.top = finalY + 'px';
                    heart.style.opacity = '0';
                    heart.style.transform = 'scale(0.5) rotate(' + (Math.random() * 360) + 'deg)';
                }, 10);
                
                // ç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    if (heart.parentNode) {
                        heart.parentNode.removeChild(heart);
                    }
                }, 800);
            }
        }
        
        function createFloatingHearts() {
            const container = document.getElementById('floatingHearts');
            container.innerHTML = '';
            
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’', 'ğŸ’˜'][Math.floor(Math.random() * 5)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDelay = Math.random() * 8 + 's';
                heart.style.fontSize = (Math.random() * 15 + 15) + 'px';
                
                container.appendChild(heart);
            }
        }

        function updateCounters() {
            document.getElementById('clickCounter').textContent = `ğŸ’– å·²è¡¨è¾¾çˆ±æ„ ${clickCount} æ¬¡`;
            document.getElementById('memoryCount').textContent = memoryCount;
        }

        // ç‚¹å‡»é¡µé¢åˆ›å»ºçˆ±å¿ƒ
        document.addEventListener('click', function(e) {
            if (e.target.tagName !== 'BUTTON' && !e.target.closest('.form-group') && !e.target.closest('.photo-card') && !e.target.closest('.modal')) {
                const heart = document.createElement('div');
                heart.style.position = 'fixed';
                heart.style.left = e.clientX + 'px';
                heart.style.top = e.clientY + 'px';
                heart.innerHTML = 'ğŸ’–';
                heart.style.fontSize = '30px';
                heart.style.pointerEvents = 'none';
                heart.style.zIndex = '1000';
                heart.style.animation = 'float 2s ease-out forwards';
                heart.style.color = '#FF69B4';
                
                document.body.appendChild(heart);
                
                setTimeout(() => {
                    heart.remove();
                }, 2000);
            }
        });

        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter' && document.getElementById('messages').classList.contains('active')) {
                addMessage();
            }
        });

        // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
        document.getElementById('photoModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closePhotoModal();
            }
        });

        // åˆå§‹åŒ–åº”ç”¨
        init();
    </script>
</body>
</html>